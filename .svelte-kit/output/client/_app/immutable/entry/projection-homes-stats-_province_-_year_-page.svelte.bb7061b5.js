import{S as Ce,i as Ee,s as Ne,y as _,z as g,A as b,g as p,d as c,B as d,U as ke,o as Te,a as C,c as E,b as $,v as Ue,f as Se,h as u,q as D,r as L,u as ze,k as y,l as x,m as ee,R as te,T as Fe,w as W,W as X,n as Ie,p as Be,X as H}from"../chunks/index.ef99c551.js";import{A as De}from"../chunks/Alert.e4817582.js";import{B as de}from"../chunks/Button.a64edcf1.js";import{C as Le,a as Re,F as qe}from"../chunks/FormGroup.9ce7f9a3.js";import{C as Ge}from"../chunks/Container.715665e7.js";import{F as Je,L as K,I as Q}from"../chunks/Label.ae91bbdc.js";import"../chunks/Offcanvas.svelte_svelte_type_style_lang.8a658554.js";import{p as Oe}from"../chunks/stores.e664f759.js";function ve(o){let n,t;return n=new De({props:{dismissible:!0,color:o[2],$$slots:{default:[Me]},$$scope:{ctx:o}}}),n.$on("dismiss",o[8]),{c(){_(n.$$.fragment)},l(s){g(n.$$.fragment,s)},m(s,a){b(n,s,a),t=!0},p(s,a){const r={};a&4&&(r.color=s[2]),a&33554434&&(r.$$scope={dirty:a,ctx:s}),n.$set(r)},i(s){t||(p(n.$$.fragment,s),t=!0)},o(s){c(n.$$.fragment,s),t=!1},d(s){d(n,s)}}}function Me(o){let n;return{c(){n=D(o[1])},l(t){n=L(t,o[1])},m(t,s){$(t,n,s)},p(t,s){s&2&&ze(n,t[1])},d(t){t&&u(n)}}}function Ve(o){let n,t;return{c(){n=y("center"),t=D("Descripción de la proyección")},l(s){n=x(s,"CENTER",{});var a=ee(n);t=L(a,"Descripción de la proyección"),a.forEach(u)},m(s,a){$(s,n,a),te(n,t)},p:Fe,d(s){s&&u(n)}}}function We(o){let n;return{c(){n=D("Provincia")},l(t){n=L(t,"Provincia")},m(t,s){$(t,n,s)},d(t){t&&u(n)}}}function Xe(o){let n;return{c(){n=D("Año")},l(t){n=L(t,"Año")},m(t,s){$(t,n,s)},d(t){t&&u(n)}}}function He(o){let n;return{c(){n=D("Parejas con hijos")},l(t){n=L(t,"Parejas con hijos")},m(t,s){$(t,n,s)},d(t){t&&u(n)}}}function Ke(o){let n;return{c(){n=D("Parejas sin hijos")},l(t){n=L(t,"Parejas sin hijos")},m(t,s){$(t,n,s)},d(t){t&&u(n)}}}function Qe(o){let n;return{c(){n=D("Personas solteras")},l(t){n=L(t,"Personas solteras")},m(t,s){$(t,n,s)},d(t){t&&u(n)}}}function Ye(o){let n;return{c(){n=D("Actualizar")},l(t){n=L(t,"Actualizar")},m(t,s){$(t,n,s)},d(t){t&&u(n)}}}function Ze(o){let n;return{c(){n=D("Atrás")},l(t){n=L(t,"Atrás")},m(t,s){$(t,n,s)},d(t){t&&u(n)}}}function ye(o){let n,t,s,a,r,f,w,m,R,G,A,z,v,F,T,h,U,j,M,J,S,O,k,V,i,N,P,I,Z,B,Y;n=new K({props:{for:"province",$$slots:{default:[We]},$$scope:{ctx:o}}});function we(e){o[11](e)}let ne={id:"province",placeholder:"Provincia"};o[3]!==void 0&&(ne.value=o[3]),s=new Q({props:ne}),W.push(()=>X(s,"value",we)),f=new K({props:{for:"year",$$slots:{default:[Xe]},$$scope:{ctx:o}}});function he(e){o[12](e)}let se={id:"year",placeholder:"Año"};o[4]!==void 0&&(se.value=o[4]),m=new Q({props:se}),W.push(()=>X(m,"value",he)),A=new K({props:{for:"couple_children",$$slots:{default:[He]},$$scope:{ctx:o}}});function je(e){o[13](e)}let re={id:"couple_children",placeholder:"Número de parejas con hijos"};o[5]!==void 0&&(re.value=o[5]),v=new Q({props:re}),W.push(()=>X(v,"value",je)),h=new K({props:{for:"couple_nochildren",$$slots:{default:[Ke]},$$scope:{ctx:o}}});function Pe(e){o[14](e)}let oe={id:"couple_nochildren",placeholder:"Número de parejas sin hijos"};o[6]!==void 0&&(oe.value=o[6]),j=new Q({props:oe}),W.push(()=>X(j,"value",Pe)),S=new K({props:{for:"single_parent",$$slots:{default:[Qe]},$$scope:{ctx:o}}});function Ae(e){o[15](e)}let ae={id:"single_parent",placeholder:"Número de personas solteras"};return o[7]!==void 0&&(ae.value=o[7]),k=new Q({props:ae}),W.push(()=>X(k,"value",Ae)),I=new de({props:{color:"success",$$slots:{default:[Ye]},$$scope:{ctx:o}}}),I.$on("click",o[10]),B=new de({props:{color:"info",$$slots:{default:[Ze]},$$scope:{ctx:o}}}),B.$on("click",st),{c(){_(n.$$.fragment),t=C(),_(s.$$.fragment),r=C(),_(f.$$.fragment),w=C(),_(m.$$.fragment),G=C(),_(A.$$.fragment),z=C(),_(v.$$.fragment),T=C(),_(h.$$.fragment),U=C(),_(j.$$.fragment),J=C(),_(S.$$.fragment),O=C(),_(k.$$.fragment),i=C(),N=y("center"),P=y("div"),_(I.$$.fragment),Z=C(),_(B.$$.fragment),this.h()},l(e){g(n.$$.fragment,e),t=E(e),g(s.$$.fragment,e),r=E(e),g(f.$$.fragment,e),w=E(e),g(m.$$.fragment,e),G=E(e),g(A.$$.fragment,e),z=E(e),g(v.$$.fragment,e),T=E(e),g(h.$$.fragment,e),U=E(e),g(j.$$.fragment,e),J=E(e),g(S.$$.fragment,e),O=E(e),g(k.$$.fragment,e),i=E(e),N=x(e,"CENTER",{});var l=ee(N);P=x(l,"DIV",{class:!0,style:!0});var q=ee(P);g(I.$$.fragment,q),Z=E(q),g(B.$$.fragment,q),q.forEach(u),l.forEach(u),this.h()},h(){Ie(P,"class","buttons"),Be(P,"text-align","center")},m(e,l){b(n,e,l),$(e,t,l),b(s,e,l),$(e,r,l),b(f,e,l),$(e,w,l),b(m,e,l),$(e,G,l),b(A,e,l),$(e,z,l),b(v,e,l),$(e,T,l),b(h,e,l),$(e,U,l),b(j,e,l),$(e,J,l),b(S,e,l),$(e,O,l),b(k,e,l),$(e,i,l),$(e,N,l),te(N,P),b(I,P,null),te(P,Z),b(B,P,null),Y=!0},p(e,l){const q={};l&33554432&&(q.$$scope={dirty:l,ctx:e}),n.$set(q);const le={};!a&&l&8&&(a=!0,le.value=e[3],H(()=>a=!1)),s.$set(le);const fe={};l&33554432&&(fe.$$scope={dirty:l,ctx:e}),f.$set(fe);const ue={};!R&&l&16&&(R=!0,ue.value=e[4],H(()=>R=!1)),m.$set(ue);const $e={};l&33554432&&($e.$$scope={dirty:l,ctx:e}),A.$set($e);const pe={};!F&&l&32&&(F=!0,pe.value=e[5],H(()=>F=!1)),v.$set(pe);const ie={};l&33554432&&(ie.$$scope={dirty:l,ctx:e}),h.$set(ie);const ce={};!M&&l&64&&(M=!0,ce.value=e[6],H(()=>M=!1)),j.$set(ce);const me={};l&33554432&&(me.$$scope={dirty:l,ctx:e}),S.$set(me);const _e={};!V&&l&128&&(V=!0,_e.value=e[7],H(()=>V=!1)),k.$set(_e);const ge={};l&33554432&&(ge.$$scope={dirty:l,ctx:e}),I.$set(ge);const be={};l&33554432&&(be.$$scope={dirty:l,ctx:e}),B.$set(be)},i(e){Y||(p(n.$$.fragment,e),p(s.$$.fragment,e),p(f.$$.fragment,e),p(m.$$.fragment,e),p(A.$$.fragment,e),p(v.$$.fragment,e),p(h.$$.fragment,e),p(j.$$.fragment,e),p(S.$$.fragment,e),p(k.$$.fragment,e),p(I.$$.fragment,e),p(B.$$.fragment,e),Y=!0)},o(e){c(n.$$.fragment,e),c(s.$$.fragment,e),c(f.$$.fragment,e),c(m.$$.fragment,e),c(A.$$.fragment,e),c(v.$$.fragment,e),c(h.$$.fragment,e),c(j.$$.fragment,e),c(S.$$.fragment,e),c(k.$$.fragment,e),c(I.$$.fragment,e),c(B.$$.fragment,e),Y=!1},d(e){d(n,e),e&&u(t),d(s,e),e&&u(r),d(f,e),e&&u(w),d(m,e),e&&u(G),d(A,e),e&&u(z),d(v,e),e&&u(T),d(h,e),e&&u(U),d(j,e),e&&u(J),d(S,e),e&&u(O),d(k,e),e&&u(i),e&&u(N),d(I),d(B)}}}function xe(o){let n,t;return n=new qe({props:{$$slots:{default:[ye]},$$scope:{ctx:o}}}),{c(){_(n.$$.fragment)},l(s){g(n.$$.fragment,s)},m(s,a){b(n,s,a),t=!0},p(s,a){const r={};a&33554680&&(r.$$scope={dirty:a,ctx:s}),n.$set(r)},i(s){t||(p(n.$$.fragment,s),t=!0)},o(s){c(n.$$.fragment,s),t=!1},d(s){d(n,s)}}}function et(o){let n,t,s,a;return n=new Re({props:{$$slots:{default:[Ve]},$$scope:{ctx:o}}}),s=new Je({props:{$$slots:{default:[xe]},$$scope:{ctx:o}}}),s.$on("submit",o[9]),{c(){_(n.$$.fragment),t=C(),_(s.$$.fragment)},l(r){g(n.$$.fragment,r),t=E(r),g(s.$$.fragment,r)},m(r,f){b(n,r,f),$(r,t,f),b(s,r,f),a=!0},p(r,f){const w={};f&33554432&&(w.$$scope={dirty:f,ctx:r}),n.$set(w);const m={};f&33554680&&(m.$$scope={dirty:f,ctx:r}),s.$set(m)},i(r){a||(p(n.$$.fragment,r),p(s.$$.fragment,r),a=!0)},o(r){c(n.$$.fragment,r),c(s.$$.fragment,r),a=!1},d(r){d(n,r),r&&u(t),d(s,r)}}}function tt(o){let n,t,s,a=o[0]&&ve(o);return t=new Le({props:{class:"w-50 p-3 mb-3 mx-auto",$$slots:{default:[et]},$$scope:{ctx:o}}}),{c(){a&&a.c(),n=C(),_(t.$$.fragment)},l(r){a&&a.l(r),n=E(r),g(t.$$.fragment,r)},m(r,f){a&&a.m(r,f),$(r,n,f),b(t,r,f),s=!0},p(r,f){r[0]?a?(a.p(r,f),f&1&&p(a,1)):(a=ve(r),a.c(),p(a,1),a.m(n.parentNode,n)):a&&(Ue(),c(a,1,1,()=>{a=null}),Se());const w={};f&33554680&&(w.$$scope={dirty:f,ctx:r}),t.$set(w)},i(r){s||(p(a),p(t.$$.fragment,r),s=!0)},o(r){c(a),c(t.$$.fragment,r),s=!1},d(r){a&&a.d(r),r&&u(n),d(t,r)}}}function nt(o){let n,t;return n=new Ge({props:{$$slots:{default:[tt]},$$scope:{ctx:o}}}),{c(){_(n.$$.fragment)},l(s){g(n.$$.fragment,s)},m(s,a){b(n,s,a),t=!0},p(s,[a]){const r={};a&33554687&&(r.$$scope={dirty:a,ctx:s}),n.$set(r)},i(s){t||(p(n.$$.fragment,s),t=!0)},o(s){c(n.$$.fragment,s),t=!1},d(s){d(n,s)}}}async function st(){window.location.href="https://sos2223-11.appspot.com/projection-homes-stats"}function rt(o,n,t){let s;ke(o,Oe,i=>t(21,s=i)),Te(async()=>{j()});let a="/api/v2/projection-homes-stats",r=!1,f="",w="",m=[],R="";function G(){t(0,r=!1)}let A=s.params.province,z=s.params.year,v=A,F=z,T="",h="",U="";async function j(){R="";const i=await fetch(a+"/"+A+"/"+z,{method:"GET"});try{const P=await i.json();R=JSON.stringify(P,null,2),m=P,t(3,v=m.province),t(4,F=m.year),t(5,T=m.couple_children),t(6,h=m.couple_nochildren),t(7,U=m.single_parent)}catch(P){console.log(`Error parsing result: ${P}`)}const N=await i.status;N==404&&t(1,f=`La provincia ${A} del año ${z} no ha sido encontrada`),N==500&&t(1,f="Error interno")}async function M(){R="",t(0,r=!1);const N=await(await fetch(a+"/"+A+"/"+z,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({province:v,year:F,couple_children:T,couple_nochildren:h,single_parent:U})})).status;N==200?(t(0,r=!0),t(1,f="Proyección actualizada"),t(2,w="success"),j()):N==400&&(t(0,r=!0),t(1,f="Se ha intentado cambiar provincia y año o faltan campos por rellenar"),t(2,w="warning"),j())}function J(i){v=i,t(3,v)}function S(i){F=i,t(4,F)}function O(i){T=i,t(5,T)}function k(i){h=i,t(6,h)}function V(i){U=i,t(7,U)}return[r,f,w,v,F,T,h,U,G,j,M,J,S,O,k,V]}class ct extends Ce{constructor(n){super(),Ee(this,n,rt,nt,Ne,{})}}export{ct as default};
