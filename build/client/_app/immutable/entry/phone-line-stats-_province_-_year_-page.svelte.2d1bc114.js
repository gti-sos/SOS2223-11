import{S as lt,i as ot,s as at,k as p,q as $,a as m,e as Ze,l as _,m as h,r as P,h as s,c as T,b as U,R as t,g as S,d as J,f as xe,U as st,o as rt,y as He,z as Ie,A as Ne,B as Oe,u as K,_ as F,M as Ae,N as ft,v as et}from"../chunks/index.ef99c551.js";import{A as it}from"../chunks/Alert.e4817582.js";import{B as ut}from"../chunks/Button.a64edcf1.js";import"../chunks/Offcanvas.svelte_svelte_type_style_lang.8a658554.js";import{T as pt}from"../chunks/Table.2e95e7cf.js";import{p as _t}from"../chunks/stores.e664f759.js";function tt(o){let l,e;return l=new it({props:{color:o[1],isOpen:o[2],toggle:o[11],$$slots:{default:[ct]},$$scope:{ctx:o}}}),{c(){He(l.$$.fragment)},l(n){Ie(l.$$.fragment,n)},m(n,i){Ne(l,n,i),e=!0},p(n,i){const c={};i&2&&(c.color=n[1]),i&4&&(c.isOpen=n[2]),i&4&&(c.toggle=n[11]),i&1048577&&(c.$$scope={dirty:i,ctx:n}),l.$set(c)},i(n){e||(S(l.$$.fragment,n),e=!0)},o(n){J(l.$$.fragment,n),e=!1},d(n){Oe(l,n)}}}function ct(o){let l;return{c(){l=$(o[0])},l(e){l=P(e,o[0])},m(e,n){U(e,l,n)},p(e,n){n&1&&K(l,e[0])},d(e){e&&s(l)}}}function nt(o){let l,e;return l=new pt({props:{$$slots:{default:[ht]},$$scope:{ctx:o}}}),{c(){He(l.$$.fragment)},l(n){Ie(l.$$.fragment,n)},m(n,i){Ne(l,n,i),e=!0},p(n,i){const c={};i&1048764&&(c.$$scope={dirty:i,ctx:n}),l.$set(c)},i(n){e||(S(l.$$.fragment,n),e=!0)},o(n){J(l.$$.fragment,n),e=!1},d(n){Oe(l,n)}}}function dt(o){let l;return{c(){l=$("Actualizar")},l(e){l=P(e,"Actualizar")},m(e,n){U(e,l,n)},d(e){e&&s(l)}}}function ht(o){let l,e,n,i,c,b,r,f,a,d,z,L,j,N,B,M,Q,W,V,G,y,E,w,A,R,X,ve,Ee,Z,Y,$e,x,q,Pe,ee,C,ge,te,H,be,D,ne,le=o[7].province+"",_e,De,oe,ae=o[7].year+"",ce,ke,se,re=o[7].landline+"",de,we,fe,ie=o[7].post_payment_phone_line+"",he,Le,ue,pe=o[7].wide_landline+"",me,O,ye,Se;return H=new ut({props:{$$slots:{default:[dt]},$$scope:{ctx:o}}}),H.$on("click",o[10]),H.$on("click",o[15]),{c(){l=p("thead"),e=p("tr"),n=p("th"),i=$("Province"),c=m(),b=p("th"),r=$("Year"),f=m(),a=p("th"),d=$("Landline"),z=m(),L=p("th"),j=$("Post_Payment"),N=m(),B=p("th"),M=$("Wide_Landline"),Q=m(),W=p("th"),V=$("Action"),G=m(),y=p("tbody"),E=p("tr"),w=p("td"),A=$(o[8]),R=m(),X=p("td"),ve=$(o[9]),Ee=m(),Z=p("td"),Y=p("input"),$e=m(),x=p("td"),q=p("input"),Pe=m(),ee=p("td"),C=p("input"),ge=m(),te=p("td"),He(H.$$.fragment),be=m(),D=p("tr"),ne=p("td"),_e=$(le),De=m(),oe=p("td"),ce=$(ae),ke=m(),se=p("td"),de=$(re),we=m(),fe=p("td"),he=$(ie),Le=m(),ue=p("td"),me=$(pe)},l(u){l=_(u,"THEAD",{});var v=h(l);e=_(v,"TR",{});var g=h(e);n=_(g,"TH",{});var Ue=h(n);i=P(Ue,"Province"),Ue.forEach(s),c=T(g),b=_(g,"TH",{});var ze=h(b);r=P(ze,"Year"),ze.forEach(s),f=T(g),a=_(g,"TH",{});var Be=h(a);d=P(Be,"Landline"),Be.forEach(s),z=T(g),L=_(g,"TH",{});var Re=h(L);j=P(Re,"Post_Payment"),Re.forEach(s),N=T(g),B=_(g,"TH",{});var je=h(B);M=P(je,"Wide_Landline"),je.forEach(s),Q=T(g),W=_(g,"TH",{});var We=h(W);V=P(We,"Action"),We.forEach(s),g.forEach(s),v.forEach(s),G=T(u),y=_(u,"TBODY",{});var Te=h(y);E=_(Te,"TR",{});var k=h(E);w=_(k,"TD",{});var Ye=h(w);A=P(Ye,o[8]),Ye.forEach(s),R=T(k),X=_(k,"TD",{});var qe=h(X);ve=P(qe,o[9]),qe.forEach(s),Ee=T(k),Z=_(k,"TD",{});var Ce=h(Z);Y=_(Ce,"INPUT",{}),Ce.forEach(s),$e=T(k),x=_(k,"TD",{});var Je=h(x);q=_(Je,"INPUT",{}),Je.forEach(s),Pe=T(k),ee=_(k,"TD",{});var Me=h(ee);C=_(Me,"INPUT",{}),Me.forEach(s),ge=T(k),te=_(k,"TD",{});var Ge=h(te);Ie(H.$$.fragment,Ge),Ge.forEach(s),k.forEach(s),be=T(Te),D=_(Te,"TR",{});var I=h(D);ne=_(I,"TD",{});var Fe=h(ne);_e=P(Fe,le),Fe.forEach(s),De=T(I),oe=_(I,"TD",{});var Ke=h(oe);ce=P(Ke,ae),Ke.forEach(s),ke=T(I),se=_(I,"TD",{});var Qe=h(se);de=P(Qe,re),Qe.forEach(s),we=T(I),fe=_(I,"TD",{});var Ve=h(fe);he=P(Ve,ie),Ve.forEach(s),Le=T(I),ue=_(I,"TD",{});var Xe=h(ue);me=P(Xe,pe),Xe.forEach(s),I.forEach(s),Te.forEach(s)},m(u,v){U(u,l,v),t(l,e),t(e,n),t(n,i),t(e,c),t(e,b),t(b,r),t(e,f),t(e,a),t(a,d),t(e,z),t(e,L),t(L,j),t(e,N),t(e,B),t(B,M),t(e,Q),t(e,W),t(W,V),U(u,G,v),U(u,y,v),t(y,E),t(E,w),t(w,A),t(E,R),t(E,X),t(X,ve),t(E,Ee),t(E,Z),t(Z,Y),F(Y,o[3]),t(E,$e),t(E,x),t(x,q),F(q,o[4]),t(E,Pe),t(E,ee),t(ee,C),F(C,o[5]),t(E,ge),t(E,te),Ne(H,te,null),t(y,be),t(y,D),t(D,ne),t(ne,_e),t(D,De),t(D,oe),t(oe,ce),t(D,ke),t(D,se),t(se,de),t(D,we),t(D,fe),t(fe,he),t(D,Le),t(D,ue),t(ue,me),O=!0,ye||(Se=[Ae(Y,"input",o[12]),Ae(q,"input",o[13]),Ae(C,"input",o[14])],ye=!0)},p(u,v){v&8&&Y.value!==u[3]&&F(Y,u[3]),v&16&&q.value!==u[4]&&F(q,u[4]),v&32&&C.value!==u[5]&&F(C,u[5]);const g={};v&1048576&&(g.$$scope={dirty:v,ctx:u}),H.$set(g),(!O||v&128)&&le!==(le=u[7].province+"")&&K(_e,le),(!O||v&128)&&ae!==(ae=u[7].year+"")&&K(ce,ae),(!O||v&128)&&re!==(re=u[7].landline+"")&&K(de,re),(!O||v&128)&&ie!==(ie=u[7].post_payment_phone_line+"")&&K(he,ie),(!O||v&128)&&pe!==(pe=u[7].wide_landline+"")&&K(me,pe)},i(u){O||(S(H.$$.fragment,u),O=!0)},o(u){J(H.$$.fragment,u),O=!1},d(u){u&&s(l),u&&s(G),u&&s(y),Oe(H),ye=!1,ft(Se)}}}function mt(o){let l,e,n,i,c,b,r=o[0]!=""&&tt(o),f=o[6]!=404&&nt(o);return{c(){l=p("h1"),e=$("Lineas de teléfono"),n=m(),r&&r.c(),i=m(),f&&f.c(),c=Ze()},l(a){l=_(a,"H1",{});var d=h(l);e=P(d,"Lineas de teléfono"),d.forEach(s),n=T(a),r&&r.l(a),i=T(a),f&&f.l(a),c=Ze()},m(a,d){U(a,l,d),t(l,e),U(a,n,d),r&&r.m(a,d),U(a,i,d),f&&f.m(a,d),U(a,c,d),b=!0},p(a,[d]){a[0]!=""?r?(r.p(a,d),d&1&&S(r,1)):(r=tt(a),r.c(),S(r,1),r.m(i.parentNode,i)):r&&(et(),J(r,1,1,()=>{r=null}),xe()),a[6]!=404?f?(f.p(a,d),d&64&&S(f,1)):(f=nt(a),f.c(),S(f,1),f.m(c.parentNode,c)):f&&(et(),J(f,1,1,()=>{f=null}),xe())},i(a){b||(S(r),S(f),b=!0)},o(a){J(r),J(f),b=!1},d(a){a&&s(l),a&&s(n),r&&r.d(a),a&&s(i),f&&f.d(a),a&&s(c)}}}function Tt(o,l,e){let n;st(o,_t,w=>e(18,n=w));let i="",c="",b=!0;rt(async()=>{M()});let r=n.params.province,f=parseInt(n.params.year),a="/api/v2/phone-line-stats/"+r+"/"+f,d="",z="",L="",j="",N="",B={};async function M(){console.log(d),e(6,N=j="");const w=await fetch(a,{method:"GET"});try{const R=await w.json();j=JSON.stringify(R,null,2),e(7,B=R)}catch(R){console.log(`Error parsing result: ${R}`)}const A=await w.status;e(6,N=A),A==404&&(e(0,i=`El recurso ${r} ${f} no existe`),e(1,c="danger"))}async function Q(){e(6,N=j="");const A=await(await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({province:r,year:f,landline:parseInt(d),post_payment_phone_line:parseInt(z),wide_landline:parseInt(L)})})).status;e(6,N=A),A==200?(e(0,i="Dato actualizado"),e(1,c="success"),M()):A==400&&(e(0,i="Los datos introducidos son incorrectos "),e(1,c="danger"))}const W=()=>e(2,b=!1);function V(){d=this.value,e(3,d)}function G(){z=this.value,e(4,z)}function y(){L=this.value,e(5,L)}return[i,c,b,d,z,L,N,B,r,f,Q,W,V,G,y,()=>e(2,b=!0)]}class Dt extends lt{constructor(l){super(),ot(this,l,Tt,mt,at,{})}}export{Dt as default};
